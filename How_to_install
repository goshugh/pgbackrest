
0. compile
cd src
./configure
./make
cp pgbackrest /usr/bin


1. mkdir 
mkdir /var/log/pgbackrest
chown postgres:postgres /var/logpgbackrest
mkdir /etc/pgbackrest
chown postgres:postgers /etc/pgbackrest


2. cp 
cp pgbackrest.conf /etc/pgbackrest/

3. vi postgresql.conf

-- archive 
archive_command = 'pgbackrest --stanza=demo archive-push %p'
archive_mode = o

-- How to fix this bug : 'cluster do not match version' error
data_directory=/var/lib/pgsql/data

4. postgreSQL restart


5. create repository
pgbackrest --stanza=demo --log-level-console=info stanza-create

stanza-create command end: completed successfully

6. pgbackrest check
pgbackrest --stanza=demo --log-level-console=info check

info: check command end: completed successfully


7. full backup
pgbackrest --stanza=demo --log-level-console=info backup
